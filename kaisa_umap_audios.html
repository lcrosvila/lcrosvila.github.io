<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scatter Plot with Audio Playback</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
    <div id="scatter-plot"></div>
    <audio id="audio-player" controls style="display:none;"></audio>
    <script>
        $(document).ready(function(){
            var scatterData = [];  // Scatter plot data
            var audioMap = {};     // Mapping from point index to audio file path

            // Load scatter plot data and audio file paths
            $.getJSON('kaisa_umap.html', function(data){
                scatterData = data['data'][0]; // Scatter plot data
                for (var i = 0; i < scatterData.x.length; i++) {
                    var fileName = scatterData.hovertext[i]; // Get file name from hover text
                    var audioPath = fileName; // Assuming the file path is directly in the 'file_name' column
                    audioMap[i] = audioPath;
                }

                // Draw scatter plot
                Plotly.newPlot('scatter-plot', [scatterData], {
                    hovermode: 'closest'
                });

                // Event handler for clicking on a point
                $('#scatter-plot').on('plotly_click', function(data){
                    var pointIndex = data.points[0].pointIndex;
                    var audioPath = audioMap[pointIndex];
                    if (audioPath) {
                        var audio = document.getElementById('audio-player');
                        audio.src = audioPath;
                        audio.play();
                    }
                });
            });
        });
    </script>
</body>
</html>
